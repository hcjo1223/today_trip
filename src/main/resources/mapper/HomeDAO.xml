<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.app.domain.HomeDAO">

	<insert id="insertLog" flushCache="true" parameterType="com.spring.app.domain.LogDTO">
		INSERT INTO user_log
			(log_uid, log_contents, log_date)
		VALUES
			(log_uid_seq.nextval, #{logContent}, #{nowDate})
	</insert> 

	<select id="selectPopularPic" resultType="com.spring.app.domain.picLibDTO">
	<![CDATA[  	
		SELECT 
			pl.PC_UID "pcuid" ,pl.PL_PATH "path"
		FROM 
			(SELECT * 
				FROM
				(SELECT * 
					FROM 
						PICTURE 
					WHERE 
						PC_WRITE_DATE BETWEEN '${startDate}' AND '${endDate}'
					ORDER BY 
						PC_HITS DESC)
				WHERE ROWNUM= 1) p 
			JOIN 
				PIC_LIB pl 
			ON 
				p.PC_UID = pl.PC_UID
		]]>	
	</select>

</mapper>